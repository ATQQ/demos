<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PNG 图片在线压缩</title>
    <!-- 页面样式 -->
    <link rel="stylesheet" href="./index.css">
    <!-- 图片预览 -->
    <link rel="stylesheet" href="https://cdn.staticfile.net/viewerjs/1.11.6/viewer.min.css">
    <script src="https://cdn.staticfile.net/viewerjs/1.11.6/viewer.min.js"></script>
    <!-- 图片压缩  -->
    <script src="https://cdn.staticfile.net/pako/1.0.5/pako.min.js"></script>
    <script src="https://cdn.staticfile.net/upng-js/2.1.0/UPNG.min.js"></script>
    <!-- 51统计代码 -->
    <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
    <script>window.LA && LA.init({ id: "KNdTal5LkAXiUerM", ck: "KNdTal5LkAXiUerM" })</script>
</head>

<body>
    <!-- TODO：迭代样式 -->
    <p class="github"><a href="https://github.com/ATQQ/demos/tree/main/pages/png-compress" target="_blank">GitHub</a>
    </p>
    <h1>PNG 图片压缩 | UPNG.js</h1>
    <div class="paste-area">
        <textarea id="cv" cols="30" rows="10"></textarea>
        <p class="tip">可将图片拖放至此区域 或 点击后直接粘贴图片</p>
    </div>
    <input type="file" accept="image/*" id="file">
    <details>
        <summary>压缩参数</summary>
        <div id="configForm">
            <label>
                压缩质量：
                <input type="number" step="0.1" min="0" max="1" value="0.8" id="qualityInput">
            </label>
            <label>
                压缩后更大是否使用原图：
                <input type="checkbox" checked id="noCompressIfLargerInput">
            </label>
            <label>
                压缩后的新宽度：
                <input type="number" value="0" id="widthInput">
            </label>
            <label>
                压缩后的新高度：
                <input type="number" value="0" id="heightInput">
            </label>
            <p>质量：为 0 表示使用无损压缩</p>
            <p>宽高：为 0 表示保持原状不变</p>
            <button id="refresh">刷新</button>
        </div>
    </details>

    <table>
        <thead>
            <tr>
                <th>原图</th>
                <th>压缩后 <span id="download">下载</span></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><img id="origin-img" src="./origin.png" alt="原图"></td>
                <td><img id="compressed-img" src="./compressed.png" alt="压缩后图片"></td>
            </tr>
            <tr>
                <td id="origin-size">2.06M</td>
                <td id="compressed-size" style="color: green;">344.52K</td>
            </tr>
        </tbody>
    </table>
    <p class="info">体积减少：<span id="compression-percentage">83.70</span>%</p>
    <script src="./index.js"></script>
</body>

</html>